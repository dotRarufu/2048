{"version":3,"sources":["components/Square.js","App.js","reportWebVitals.js","index.js"],"names":["Square","i","value","newSquare","className","App","useState","Array","fill","squareValues","setSquareValues","start","setStart","newSquares","setNewSquares","result","setResult","handleClickStart","randomSquare","finalSquareValues","useEffect","triedDirections","handleKeyboard","e","direction","w","a","s","d","key","includes","push","newSquareValues","slice","newSkipSquares","invalidMove","forEach","squareValue","index","targetIndex","crossDirections","find","element","targetSquare","length","ctr","endSquares","children","childrenIndex","lastSquares","filledSquares","filter","child","childIndex","currentEndSquares","j","emptySquares","window","addEventListener","removeEventListener","onClick","reduce","b","style","res","spawnSquares","href","up","down","left","right","selection","pick1","randomNumber","min","max","Math","floor","random","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.7d58bc9a.chunk.js","sourcesContent":["const Square = ({ i, value, newSquare }) => {\r\n  const squareColors = {\r\n    2: '555',\r\n    4: 'f26161',\r\n    8: 'f03939',\r\n    16: 'ea0909',\r\n    32: '9a0707',\r\n    64: 'BCD2E8',\r\n    128: '91BAD6',\r\n    256: '73A5C6',\r\n    512: '528AAE',\r\n    1024: '2E5984',\r\n    2048: '1aa260',\r\n  };\r\n  return (\r\n    <div\r\n      key={i}\r\n      className={!newSquare ? `bg-${squareColors[value]} square` : 'square new'}\r\n    >\r\n      {value}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Square;\r\n","import './App.css';\nimport Square from './components/Square';\nimport { useEffect, useState } from 'react';\n\nfunction App() {\n  const [squareValues, setSquareValues] = useState(Array(16).fill(null));\n  const [start, setStart] = useState(false);\n  const [newSquares, setNewSquares] = useState([]);\n  const [result, setResult] = useState(null);\n\n  useEffect(() => {\n    const triedDirections = [];\n    function handleKeyboard(e) {\n      const direction = getDirection(e.key);\n      if (result) {\n        return;\n      }\n      if (!triedDirections.includes(direction) && direction) {\n        triedDirections.push(direction);\n      }\n      if (!direction) {\n        return;\n      }\n\n      const newSquareValues = squareValues.slice();\n      const newSkipSquares = [];\n      let invalidMove = [];\n\n      // Adds squares\n      newSquareValues.forEach((squareValue, index) => {\n        if (!squareValue || newSkipSquares.includes(index)) {\n          return;\n        }\n\n        const targetIndex = crossDirections[index][direction].find(\n          element => newSquareValues[element]\n        );\n\n        const targetSquare = {\n          squareValue: newSquareValues[targetIndex],\n          index: targetIndex,\n        };\n\n        if (\n          squareValue === targetSquare.squareValue &&\n          !newSkipSquares.includes(targetSquare.index)\n        ) {\n          newSquareValues[targetSquare.index] += squareValue;\n          newSquareValues[index] = null;\n          newSkipSquares.push(targetSquare.index);\n          invalidMove.push(false);\n\n          return;\n        }\n\n        invalidMove.push(true);\n      });\n\n      if (newSquareValues.includes(1024)) {\n        setResult('You win');\n      } else if (\n        !newSquareValues.includes(null) &&\n        !invalidMove.includes(false) &&\n        triedDirections.length === 4\n      ) {\n        setResult('Game over');\n        return;\n      }\n\n      // Moves squares\n      for (let i = 0, ctr = 1; i < ctr; i += 1) {\n        endSquares[direction].forEach((children, childrenIndex) => {\n          const lastSquares = [];\n          const filledSquares = children.filter(\n            child => newSquareValues[child]\n          );\n\n          // Moves the square value to next square (1 by 1)\n          children.forEach((child, childIndex) => {\n            if (!newSquareValues[child]) {\n              return;\n            }\n            const currentEndSquares = endSquares[direction][childrenIndex];\n            if (\n              !newSquareValues[currentEndSquares[childIndex + 1]] &&\n              childIndex !== children.length - 1\n            ) {\n              newSquareValues[currentEndSquares[childIndex + 1]] =\n                newSquareValues[currentEndSquares[childIndex]];\n              newSquareValues[currentEndSquares[childIndex]] = null;\n              invalidMove.push(false);\n              return;\n            }\n            invalidMove.push(true);\n          });\n\n          if (filledSquares.length === 0) {\n            return;\n          }\n\n          // Checks from last square to the first square (group)\n          for (\n            let j = children.length;\n            j > children.length - filledSquares.length;\n            j -= 1\n          ) {\n            newSquareValues[children[j - 1]]\n              ? lastSquares.push(children[j - 1])\n              : lastSquares.push(false);\n          }\n\n          if (lastSquares.includes(false)) {\n            ctr += 1;\n          }\n        });\n      }\n\n      if (!invalidMove.includes(false)) {\n        return;\n      }\n\n      const emptySquares = [];\n      newSquareValues.forEach((value, index) => {\n        if (value === null) {\n          emptySquares.push(index);\n        }\n      });\n\n      const { newSquares, finalSquareValues } = randomSquare(\n        newSquareValues,\n        emptySquares\n      );\n\n      setNewSquares(newSquares);\n      setSquareValues(finalSquareValues);\n    }\n    window.addEventListener('keypress', handleKeyboard);\n\n    return () => {\n      window.removeEventListener('keypress', handleKeyboard);\n    };\n  }, [result, squareValues, start]);\n\n  function spawnSquares() {\n    const res = [];\n\n    squareValues.forEach((squareValue, i) =>\n      res.push(\n        <Square\n          key={i}\n          newSquare={newSquares.includes(i) ? true : false}\n          value={squareValue}\n        ></Square>\n      )\n    );\n\n    return res;\n  }\n\n  function handleClickStart() {\n    const { newSquares, finalSquareValues } = randomSquare(\n      Array(16).fill(null),\n      [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15]\n    );\n    setSquareValues(finalSquareValues);\n    setNewSquares([]);\n    setResult(null);\n    setStart(!start);\n  }\n\n  return (\n    <div className=\"g-2048\">\n      <div className=\"top-row\">\n        <div onClick={handleClickStart} className=\"start-btn\">\n          New game\n        </div>\n\n        <div className=\"score\">\n          Score: {squareValues.reduce((a, b) => a + b, 0)}\n        </div>\n      </div>\n      <div className=\"board\" style={result ? { filter: 'blur(2px)' } : {}}>\n        {spawnSquares()}\n      </div>\n\n      {result ? (\n        <div className=\"result\">\n          <div className=\"status\">{result}</div>\n          <div onClick={handleClickStart} className=\"start-btn\">\n            Play again\n          </div>\n        </div>\n      ) : (\n        ''\n      )}\n\n      <footer>\n        Created by skrr-tech, based on\n        <a href=\"https://play2048.co/\">play2048.co</a>\n      </footer>\n    </div>\n  );\n}\n\nexport default App;\n\nconst endSquares = {\n  up: [\n    [12, 8, 4, 0],\n    [13, 9, 5, 1],\n    [14, 10, 6, 2],\n    [15, 11, 7, 3],\n  ],\n  down: [\n    [0, 4, 8, 12],\n    [1, 5, 9, 13],\n    [2, 6, 10, 14],\n    [3, 7, 11, 15],\n  ],\n  left: [\n    [3, 2, 1, 0],\n    [7, 6, 5, 4],\n    [11, 10, 9, 8],\n    [15, 14, 13, 12],\n  ],\n  right: [\n    [0, 1, 2, 3],\n    [4, 5, 6, 7],\n    [8, 9, 10, 11],\n    [12, 13, 14, 15],\n  ],\n};\n\nfunction randomSquare(squareValues, emptySquares) {\n  let selection = emptySquares.slice();\n\n  const newSquares = [];\n  const newSquareValues = squareValues.slice();\n  const pick1 = selection[randomNumber(0, selection.length - 1)];\n\n  if (emptySquares.length === 16) {\n    selection = selection.filter((value, index) => index !== pick1);\n    const pick2 = selection[randomNumber(0, selection.length - 1)];\n    newSquareValues[pick2] = randomNumber(1, 13) === 13 ? 4 : 2;\n  }\n\n  newSquareValues[pick1] = randomNumber(1, 13) === 13 ? 4 : 2;\n\n  newSquares.push(pick1);\n  const res = {\n    newSquares: newSquares,\n    finalSquareValues: newSquareValues,\n  };\n  return res;\n}\n\nconst crossDirections = {\n  0: { up: [null], down: [4, 8, 12], right: [1, 2, 3], left: [null] },\n  1: { up: [null], down: [5, 9, 13], right: [2, 3], left: [0] },\n  2: { up: [null], down: [6, 10, 14], right: [3], left: [1, 0] },\n  3: { up: [null], down: [7, 11, 15], right: [null], left: [2, 1, 0] },\n  4: { up: [0], down: [8, 12], right: [5, 6, 7], left: [null] },\n  5: { up: [1], down: [9, 13], right: [6, 7], left: [4] },\n  6: { up: [2], down: [10, 14], right: [7], left: [5, 4] },\n  7: { up: [3], down: [11, 15], right: [null], left: [6, 5, 4] },\n  8: { up: [4, 0], down: [12], right: [9, 10, 11], left: [null] },\n  9: { up: [5, 1], down: [13], right: [10, 11], left: [8] },\n  10: { up: [6, 2], down: [14], right: [11], left: [9, 8] },\n  11: { up: [7, 3], down: [15], right: [null], left: [10, 9, 8] },\n  12: { up: [8, 4, 0], down: [null], right: [13, 14, 15], left: [null] },\n  13: { up: [9, 5, 1], down: [null], right: [14, 15], left: [12] },\n  14: { up: [10, 6, 2], down: [null], right: [15], left: [13, 12] },\n  15: { up: [11, 7, 3], down: [null], right: [null], left: [14, 13, 12] },\n};\n\nfunction randomNumber(min, max) {\n  return Math.floor(Math.random() * (max - min + 1) + min);\n}\n\nfunction getDirection(key) {\n  const directions = {\n    w: 'up',\n    a: 'left',\n    s: 'down',\n    d: 'right',\n  };\n\n  return directions[key];\n}\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\nreportWebVitals();\n"],"sourceRoot":""}